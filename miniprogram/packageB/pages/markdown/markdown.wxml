<view class="container">
  <!-- 顶部导航栏 -->
  <view class="navbar">
    <text class="title">Markdown</text>
    <!-- <view class="right-container">
      <view class="switch-wrapper">
        <switch class="mode-switch" checked="{{isPreviewMode}}" bindchange="toggleMode" />
      </view>
      <text class="mode-text">{{isPreviewMode ? '预览模式' : '编辑模式'}}</text>
    </view> -->
  </view>

  <!-- 文件选择与信息区域 -->
  <view class="file-section">
    <view class="file-picker" bindtap="chooseMdFile" hover-class="file-picker-hover">
      <view class="picker-icon">
        <svg class="icon" viewBox="0 0 24 24">
          <path
            d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
            fill="#4299e1" />
        </svg>
      </view>
      <text class="picker-text">{{mdContent ? '更换 .md 文件' : '点击选择 .md 文件'}}</text>
    </view>

    <!-- 已选文件信息 -->
    <view wx:if="{{selectedFile}}" class="file-info">
      <text class="file-name">{{selectedFile.name}}</text>
      <text class="file-size">{{formatFileSize(selectedFile.size)}}</text>
    </view>
  </view>

  <!-- 内容区域 -->
  <view class="content-area">
    <!-- 编辑模式 -->
    <!-- <textarea wx:if="{{!isPreviewMode && mdContent}}" class="editor" value="{{mdContent}}" bindinput="handleInput"
      auto-height placeholder="Markdown 内容将显示在这里..." /> -->

    <!-- 预览模式 -->
    <scroll-view wx:if="{{isPreviewMode && mdContent}}" class="preview-scroll" scroll-y>
      <view class="preview-container">
        <rich-text nodes="{{renderedHtml}}"></rich-text>
      </view>
    </scroll-view>

    <!-- 空状态 -->
    <view wx:if="!mdContent" class="empty-state">
      <svg class="empty-icon" viewBox="0 0 24 24">
        <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4z" fill="#cbd5e1" />
        <path d="M13 9h-2v2H9v2h2v2h2v-2h2v-2h-2V9z" fill="#cbd5e1" />
      </svg>
      <text class="empty-text">未选择 Markdown 文件</text>
      <text class="empty-desc">请选择微信中保存的 .md 文件进行编辑和预览</text>
    </view>

    <!-- 加载中状态 -->
    <view wx:if="{{isLoading}}" class="loading-state">
      <view class="spinner"></view>
      <text class="loading-text">处理中...</text>
    </view>
  </view>
</view>