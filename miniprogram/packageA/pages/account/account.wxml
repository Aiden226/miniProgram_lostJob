<!--pages/account/account.wxml-->
<view class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <view class="header">
        <button bindtap="switchTab" class="tab-btn {{currentTab === 'record' ? 'active' : ''}}"
            data-tab="record">è®°è´¦</button>
        <button bindtap="switchTab" class="tab-btn {{currentTab === 'history' ? 'active' : ''}}"
            data-tab="history">å†å²</button>
    </view>

    <!-- è®°è´¦è¡¨å•ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰ -->
    <view class="record-form" wx:if="{{currentTab === 'record'}}">
        <view class="date-picker">
            <picker mode="date" value="{{currentDate}}" bindchange="bindDateChange">
                <view class="picker-btn">
                    <text class="icon">ğŸ“…</text>
                    <text class="date-text">{{currentDate}}</text>
                </view>
            </picker>
        </view>

        <view class="form-group">
            <text class="label">æ¶ˆè´¹ç±»å‹</text>
            <picker mode="selector" range="{{typeList}}" value="{{typeIndex}}" bindchange="bindTypeChange">
                <view class="picker-input">{{typeList[typeIndex]}}</view>
            </picker>
        </view>

        <view class="form-group">
            <text class="label">æ¶ˆè´¹é‡‘é¢ï¼ˆå…ƒï¼‰</text>
            <input type="number" placeholder="è¯·è¾“å…¥é‡‘é¢" value="{{amount}}" bindinput="onAmountInput"
                class="amount-input" />
        </view>

        <view class="form-group">
            <text class="label">å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰</text>
            <input type="text" placeholder="ç®€è¦æè¿°æ¶ˆè´¹" value="{{remark}}" bindinput="onRemarkInput" class="remark-input" />
        </view>

        <button bindtap="saveRecord" class="save-btn">ä¿å­˜è®°è´¦</button>
    </view>

    <!-- å†å²è®°å½•ï¼ˆåˆ‡æ¢æ˜¾ç¤ºï¼‰ -->
    <view class="history-container" wx:if="{{currentTab === 'history'}}">
        <view class="history-header">
            <picker mode="date" fields="month" value="{{selectedMonth}}" bindchange="bindMonthChange">
                <view class="month-picker">
                    <text class="icon">ğŸ“†</text>
                    <text class="month-text">{{selectedMonth}} è´¦å•</text>
                </view>
            </picker>
            <text class="total-amount">æœ¬æœˆæ€»æ¶ˆè´¹ï¼šÂ¥{{totalAmount}}</text>
        </view>

        <!-- æ— è®°å½•æç¤º -->
        <view class="no-record" wx:if="{{filteredRecords.length === 0}}">
            <text class="icon">ğŸ“</text>
            <text class="tip">æš‚æ— è¯¥æœˆä»½çš„è®°è´¦è®°å½•</text>
        </view>

        <!-- è®°å½•åˆ—è¡¨ -->
        <view class="record-list" wx:else>
            <view wx:for="{{filteredRecords}}" wx:key="index" class="record-item">
                <view class="record-left">
                    <text class="type-tag" style="background-color: {{typeColor[item.type]}}">{{item.type}}</text>
                    <view class="record-info">
                        <text class="record-date">{{item.date}}</text>
                        <text class="record-remark">{{item.remark || 'æ— å¤‡æ³¨'}}</text>
                    </view>
                </view>
                <text class="record-amount">-Â¥{{item.amount}}</text>
            </view>
        </view>
    </view>
</view>